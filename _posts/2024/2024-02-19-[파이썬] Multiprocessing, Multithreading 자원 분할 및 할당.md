---
title: "[íŒŒì´ì¬] Multiprocessing, Multithreading ìì› ë¶„í•  ë° í• ë‹¹"
date: "2024-02-19"
tags:
  - "python"
  - "ê°œë…ì •ë¦¬"
year: "2024"
---

# [íŒŒì´ì¬] Multiprocessing, Multithreading ìì› ë¶„í•  ë° í• ë‹¹

ì›ë³¸ ê²Œì‹œê¸€: https://velog.io/@euisuk-chung/íŒŒì´ì¬-Multiprocessing-Multithreading-ìì›-ë¶„í• -ë°-í• ë‹¹



`ë©€í‹°í”„ë¡œì„¸ì‹±`ê³¼ `ë©€í‹°ìŠ¤ë ˆë”©`ì—ì„œ ìì› ë¶„í• ê³¼ ì‘ì—… í• ë‹¹ì€ ê°ê° ë‹¤ë¥´ê²Œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì´ ê³¼ì •ì„ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì €, ì»´í“¨í„°ì˜ ìì›(íŠ¹íˆ CPUì™€ ë©”ëª¨ë¦¬) ì‚¬ìš© ë°©ì‹ê³¼ ì‘ì—…ì˜ ì¢…ë¥˜(ì˜ˆ: CPU ì§‘ì•½ì  vs. I/O ì§‘ì•½ì )ë¥¼ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.

ë©€í‹°í”„ë¡œì„¸ì‹±(Multiprocessing)ì˜ ìì› ë¶„í• 
------------------------------

ë©€í‹°í”„ë¡œì„¸ì‹±ì—ì„œëŠ” ê° í”„ë¡œì„¸ìŠ¤ê°€ ë…ë¦½ëœ ë©”ëª¨ë¦¬ ê³µê°„ì„ ê°€ì§‘ë‹ˆë‹¤. ì´ëŠ” ê° í”„ë¡œì„¸ìŠ¤ê°€ ì‹œìŠ¤í…œì˜ ìì›ì„ ë…ë¦½ì ìœ¼ë¡œ í• ë‹¹ë°›ëŠ”ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. CPU ìì›ì˜ ë¶„í• ì€ ìš´ì˜ ì²´ì œì˜ ìŠ¤ì¼€ì¤„ëŸ¬ì— ì˜í•´ ê´€ë¦¬ë˜ë©°, ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ ê°„ì— CPU ì‹œê°„ì„ ê³µì •í•˜ê²Œ ë¶„ë°°í•©ë‹ˆë‹¤.

ì‘ì—…ì´ Nê°œì˜ í”„ë¡œì„¸ìŠ¤ì— ë¶„ë°°ë  ë•Œ, ì´ë¡ ì ìœ¼ë¡œëŠ” ê° í”„ë¡œì„¸ìŠ¤ì— ì‘ì—…ì˜ 1/Nì„ í• ë‹¹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œ ë¶„í• ì€ ì‘ì—…ì˜ ì„±ê²©, í”„ë¡œì„¸ìŠ¤ì˜ ì‹¤í–‰ ìƒíƒœ, ì‹œìŠ¤í…œì˜ ë‹¤ë¥¸ ìš”êµ¬ ì‚¬í•­ ë“±ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ëŠ” CPUë¥¼ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°˜ë©´, ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ëŠ” ëŒ€ê¸° ìƒíƒœì— ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë©€í‹°ìŠ¤ë ˆë”©(Multithreading)ì˜ ìì› ë¶„í• 
----------------------------

ë©€í‹°ìŠ¤ë ˆë”©ì—ì„œëŠ” ëª¨ë“  ìŠ¤ë ˆë“œê°€ í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ ê³µê°„ì„ ê³µìœ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ë©”ëª¨ë¦¬ ìì›ì€ ë³„ë„ë¡œ ë¶„í• ë˜ì§€ ì•Šê³ , ëª¨ë“  ìŠ¤ë ˆë“œê°€ ê°™ì€ ë©”ëª¨ë¦¬ ì˜ì—­ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. CPU ìì›ì˜ ê²½ìš°, ìš´ì˜ ì²´ì œì˜ ìŠ¤ë ˆë“œ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ê° ìŠ¤ë ˆë“œì— CPU ì‹œê°„ì„ í• ë‹¹í•©ë‹ˆë‹¤.

ìŠ¤ë ˆë“œ ê°„ì˜ ì‘ì—… ë¶„í• ì€ í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ ì´ë£¨ì–´ì§€ë©°, ìŠ¤ë ˆë“œê°€ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì€ ì¼ë°˜ì ìœ¼ë¡œ ë” ì‘ê³ , êµ¬ì²´ì ì¸ ì‘ì—… ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ì§‘ë‹ˆë‹¤. ë©€í‹°ìŠ¤ë ˆë”© í™˜ê²½ì—ì„œëŠ” I/O ì‘ì—…ì´ ì§„í–‰ë˜ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ CPUë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì–´, ì „ì²´ì ì¸ í”„ë¡œê·¸ë¨ì˜ íš¨ìœ¨ì„±ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> â­ **(Q&A) ì—¬ê¸°ì„œ ì ê¹!!**
> 
> **Q.** ë©€í‹°í”„ë¡œì„¸ìŠ¤ì—ì„œ `í”„ë¡œì„¸ìŠ¤A`ì™€ `í”„ë¡œì„¸ìŠ¤B`ê°€ ìˆë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤. ê·¸ëŸ¼ 4ì´ë¼ëŠ” ê°€ìš© ìì›ì´ ìˆì„ë•Œ ë§Œì•½ í”„ë¡œì„¸ìŠ¤Aê°€ ë¨¼ì € ëë‚˜ë©´ ë‚˜ë¨¸ì§€ í”„ë¡œì„¸ìŠ¤ì¸ í”„ë¡œì„¸ìŠ¤Bê°€ ë‚¨ì€ ìì› 4ê°œë¥¼ ë‹¤ ì“°ë„ë¡ ë°”ë€Œë„ë¡ ìë™ìœ¼ë¡œ í• ë‹¹í•´ì£¼ë‚˜ìš”?
> 
> **A.** ì‹¤ì œë¡œ í”„ë¡œì„¸ìŠ¤Aê°€ ì¢…ë£Œë˜ì–´ ìì›ì´ ë°˜í™˜ë  ë•Œ, í”„ë¡œì„¸ìŠ¤Bê°€ ìë™ìœ¼ë¡œ ëª¨ë“  ìì›ì„ í™œìš©í•˜ë„ë¡ ì‹œìŠ¤í…œì´ ì¬ì¡°ì •ë˜ëŠ” ê²ƒì€ ë³´ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìì›ì˜ ì¬í• ë‹¹ì€ ìš´ì˜ ì²´ì œì˜ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ê³¼ ì •ì±…ì— ë”°ë¼ ê²°ì •ë˜ë©°, ë‹¤ë¥¸ ëŒ€ê¸° ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ë‚˜ ì‹œìŠ¤í…œì˜ ì „ë°˜ì ì¸ ìì› ê´€ë¦¬ ì „ëµì— ì˜í•´ ì˜í–¥ì„ ë°›ìŠµë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤Bê°€ ì¶”ê°€ ìì›ì„ í™œìš©í•˜ë ¤ë©´, í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ê°€ ë³‘ë ¬ ì²˜ë¦¬ë¥¼ ì§€ì›í•˜ê³  ì¶”ê°€ CPU ì½”ì–´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ë¡œ ì„¤ê³„ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

> â­ **ì¶”ê°€ ì„¤ëª…: ìì› í• ë‹¹ì˜ ë™ì‘ ë°©ì‹**
> 
> âœ… **CPU ì½”ì–´ í• ë‹¹**: ê°€ìš© ìì›ì´ CPU ì½”ì–´ë¼ê³  í•  ë•Œ, ê° í”„ë¡œì„¸ìŠ¤ëŠ” ìš´ì˜ ì²´ì œì— ì˜í•´ í•˜ë‚˜ ì´ìƒì˜ CPU ì½”ì–´ì— í• ë‹¹ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤Aì™€ í”„ë¡œì„¸ìŠ¤Bê°€ ê°ê° 2ê°œì˜ CPU ì½”ì–´ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´, ì´ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ë™ì‹œì— 2ê°œì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
> 
> âœ… **ë™ì  ì¬í• ë‹¹**: í”„ë¡œì„¸ìŠ¤Aê°€ ì‘ì—…ì„ ì™„ë£Œí•˜ê³  ì¢…ë£Œë˜ë©´, ê·¸ í”„ë¡œì„¸ìŠ¤ì— í• ë‹¹ë˜ì—ˆë˜ ìì›(ì—¬ê¸°ì„œëŠ” CPU ì½”ì–´)ì€ ì‹œìŠ¤í…œì— ë°˜í™˜ë©ë‹ˆë‹¤. ì´í›„ ìš´ì˜ ì²´ì œì˜ ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” ì´ì œ ì‚¬ìš© ê°€ëŠ¥í•œ ìì›ì„ ë‹¤ì‹œ ë¶„ë°°í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ìë™ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤Bê°€ ë‚˜ë¨¸ì§€ ìì›ì„ ëª¨ë‘ ì‚¬ìš©í•˜ë„ë¡ í• ë‹¹ë°›ëŠ” ê²ƒì€ ìë™ìœ¼ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
> âœ… **ìì›ì˜ ì¬í• ë‹¹ ì¡°ê±´**: í”„ë¡œì„¸ìŠ¤Bê°€ ì¶”ê°€ì ì¸ CPU ì½”ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ëŠ”ì§€ ì—¬ë¶€ëŠ” ì—¬ëŸ¬ ìš”ì†Œì— ì˜í•´ ê²°ì •ë©ë‹ˆë‹¤. ì´ëŠ” ìš´ì˜ ì²´ì œì˜ ìŠ¤ì¼€ì¤„ë§ ì •ì±…, í”„ë¡œì„¸ìŠ¤ì˜ ìš°ì„ ìˆœìœ„, ê·¸ë¦¬ê³  í”„ë¡œì„¸ìŠ¤Bê°€ ì¶”ê°€ ìì›ì„ íš¨ê³¼ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆëŠ”ì§€(ì˜ˆ: ë³‘ë ¬ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•œ ì‘ì—…ì¸ì§€)ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> âœ… **ìì› ì‚¬ìš©ì˜ ìµœì í™”**: ëŒ€ë¶€ë¶„ì˜ í˜„ëŒ€ ìš´ì˜ ì²´ì œëŠ” ì‹œìŠ¤í…œ ìì›ì„ íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©í•˜ê¸° ìœ„í•œ ë³µì¡í•œ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤Aê°€ ì¢…ë£Œë˜ì–´ ìì›ì´ ë°˜í™˜ë˜ë©´, ì´ ìì›ì€ ì‹œìŠ¤í…œì˜ ë‹¤ë¥¸ ëŒ€ê¸° ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ì— í• ë‹¹ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, íŠ¹ì • í”„ë¡œì„¸ìŠ¤ê°€ ìë™ìœ¼ë¡œ ëª¨ë“  ê°€ìš© ìì›ì„ ë…ì í•˜ë„ë¡ ì‹œìŠ¤í…œì´ ì¬ì¡°ì •í•˜ëŠ” ê²ƒì€ ì¼ë°˜ì ì¸ ê²½ìš°ê°€ ì•„ë‹™ë‹ˆë‹¤.

---

ì‘ì—… í• ë‹¹ ë°©ì‹
--------

ì‹¤ì œ ì‘ì—… í• ë‹¹ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì—ì„œ ê°œë°œìê°€ ê²°ì •í•©ë‹ˆë‹¤. ë©€í‹°í”„ë¡œì„¸ì‹±ì´ë‚˜ ë©€í‹°ìŠ¤ë ˆë”©ì„ ì‚¬ìš©í•  ë•Œ, ê°ê°ì˜ í”„ë¡œì„¸ìŠ¤ë‚˜ ìŠ¤ë ˆë“œì— í• ë‹¹í•  ì‘ì—…ì˜ í¬ê¸°ì™€ ë²”ìœ„ëŠ” í”„ë¡œê·¸ë¨ì˜ êµ¬ì¡°ì™€ ìš”êµ¬ ì‚¬í•­ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë°ì´í„° ì²˜ë¦¬ ì‘ì—…ì„ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ì— ë¶„ë°°í•  ë•ŒëŠ” ê° í”„ë¡œì„¸ìŠ¤ê°€ ì²˜ë¦¬í•  ë°ì´í„°ì˜ ì–‘ì„ ê· ë“±í•˜ê²Œ ë‚˜ëˆ„ê±°ë‚˜, íŠ¹ì • ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ë¥¼ í• ë‹¹í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë¶„í• í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë©€í‹°í”„ë¡œì„¸ì‹±ê³¼ ë©€í‹°ìŠ¤ë ˆë”© ëª¨ë‘ ì‘ì—…ì˜ ë³‘ë ¬ ì²˜ë¦¬ë¥¼ í†µí•´ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ì§€ë§Œ, ê·¸ êµ¬í˜„ ë°©ì‹ê³¼ ì‚¬ìš© ì‚¬ë¡€ëŠ” í¬ê²Œ ë‹¤ë¦…ë‹ˆë‹¤. `ë©€í‹°í”„ë¡œì„¸ì‹±`ì€ ë…ë¦½ì ì¸ ì‘ì—…ì´ ë§ê³ , ê° ì‘ì—…ì´ ìƒë‹¹í•œ ì–‘ì˜ CPU ìì›ì„ í•„ìš”ë¡œ í•  ë•Œ ìœ ë¦¬í•˜ë©°, `ë©€í‹°ìŠ¤ë ˆë”©`ì€ ì‘ì—… ê°„ì— ìì›ì„ ê³µìœ í•´ì•¼ í•˜ê±°ë‚˜ I/O ë°”ìš´ë“œ ì‘ì—…ì´ ë§ì„ ë•Œ íš¨ê³¼ì ì…ë‹ˆë‹¤.

ì‘ì—… í• ë‹¹ê³¼ ìì› ë¶„ë°° ë°©ì‹ì— ëŒ€í•´ ë” ìì„¸íˆ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ, ë©€í‹°í”„ë¡œì„¸ì‹±ê³¼ ë©€í‹°ìŠ¤ë ˆë”© í™˜ê²½ì—ì„œì˜ ìì› í• ë‹¹ì€ ìë™ê³¼ ìˆ˜ë™(ê°œë°œì ì§€ì •) ë°©ì‹ì„ ëª¨ë‘ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ìë™ í• ë‹¹(ì‹œìŠ¤í…œ)

* **ê°€ìš© ìì›ì˜ ìë™ ë¶„ë°°**: ìš´ì˜ ì²´ì œì˜ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ í”„ë¡œì„¸ìŠ¤ë‚˜ ìŠ¤ë ˆë“œì— ëŒ€í•´ CPU ì‹œê°„ì„ ìë™ìœ¼ë¡œ í• ë‹¹í•©ë‹ˆë‹¤. ì´ ê²½ìš°, ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” ì‹œìŠ¤í…œì˜ í˜„ì¬ ë¶€í•˜, í”„ë¡œì„¸ìŠ¤ì˜ ìš°ì„ ìˆœìœ„, í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœ(ì‹¤í–‰ ì¤‘, ëŒ€ê¸° ì¤‘ ë“±)ì™€ ê°™ì€ ì—¬ëŸ¬ ìš”ì¸ì„ ê³ ë ¤í•˜ì—¬ ìì›ì„ ë¶„ë°°í•©ë‹ˆë‹¤. ë””í´íŠ¸ë¡œ, ì‹œìŠ¤í…œì€ ê°€ëŠ¥í•œ ê³µì •í•˜ê²Œ ìì›ì„ ë¶„ë°°í•˜ë ¤ê³  ì‹œë„í•˜ì§€ë§Œ, ì´ëŠ” "1/N"ì´ë¼ëŠ” ê³ ì • ë¹„ìœ¨ë¡œ ì •í™•íˆ ë¶„ë°°ëœë‹¤ëŠ” ì˜ë¯¸ëŠ” ì•„ë‹™ë‹ˆë‹¤.

### ìˆ˜ë™ í• ë‹¹(ê°œë°œì ì§€ì •)

* **ê°œë°œìì— ì˜í•œ ëª…ì‹œì  ë¶„ë°°**: ê°œë°œìëŠ” í”„ë¡œê·¸ë¨ì˜ ìš”êµ¬ ì‚¬í•­ê³¼ ì‘ì—…ì˜ íŠ¹ì„±ì„ ê³ ë ¤í•˜ì—¬, ê° í”„ë¡œì„¸ìŠ¤ë‚˜ ìŠ¤ë ˆë“œì— í• ë‹¹ë  ì‘ì—…ì˜ ì–‘ì´ë‚˜ ìì›ì˜ ì‚¬ìš©ì„ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë°ì´í„° ì²˜ë¦¬ ì‘ì—…ì„ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ì— ë¶„ë°°í•  ë•Œ íŠ¹ì • ê¸°ì¤€ì— ë”°ë¼ ì‘ì—…ì„ ë‚˜ëˆŒ ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì‘ì—…ì˜ íš¨ìœ¨ì„±ê³¼ ì‹¤í–‰ ì‹œê°„ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### ë©€í‹°í”„ë¡œì„¸ì‹± ìì› í• ë‹¹ ì˜ˆì‹œ

ì´ ì˜ˆì‹œì—ì„œëŠ” ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ 4ê°œì˜ ì²­í¬ë¡œ ë‚˜ëˆ„ê³ , ê° ì²­í¬ë¥¼ ë³„ë„ì˜ í”„ë¡œì„¸ìŠ¤ì— í• ë‹¹í•˜ì—¬ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ëŠ” ê°œë°œìê°€ ì‘ì—…ì˜ ë¶„ë°°ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•œ ê²½ìš°ì…ë‹ˆë‹¤.

```
from multiprocessing import Pool

def my_task(data_chunk):
    # ë³µì¡í•œ ê³„ì‚° ìˆ˜í–‰
    result = sum(data_chunk)
    return result

if __name__ == "__main__":
    data = range(1000000)  # ëŒ€ëŸ‰ì˜ ë°ì´í„°
    chunks = [data[i::4] for i in range(4)]  # ë°ì´í„°ë¥¼ 4ê°œì˜ ì²­í¬ë¡œ ë‚˜ëˆ”

    with Pool(4) as p:  # 4ê°œì˜ í”„ë¡œì„¸ìŠ¤ í’€ ìƒì„±
        results = p.map(my_task, chunks)  # ê° ì²­í¬ë¥¼ ë³„ë„ì˜ í”„ë¡œì„¸ìŠ¤ì— í• ë‹¹
```

ìœ„ íŒŒì´ì¬ ì½”ë“œì—ì„œ `multiprocessing.Pool`ì„ ì‚¬ìš©í•˜ì—¬ ë©€í‹°í”„ë¡œì„¸ì‹±ì„ êµ¬í˜„í•  ë•Œ, ìì› í• ë‹¹ì€ ë‹¤ìŒê³¼ ê°™ì´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤:

#### í”„ë¡œì„¸ìŠ¤ í’€ê³¼ CPU ì½”ì–´ í• ë‹¹

* `í”„ë¡œì„¸ìŠ¤ í’€ ìƒì„±`: Pool(4)ì— ì˜í•´ 4ê°œì˜ ë³„ë„ í”„ë¡œì„¸ìŠ¤ê°€ ìƒì„±ë©ë‹ˆë‹¤. ì´ëŠ” ë©€í‹°í”„ë¡œì„¸ì‹±ì„ ìœ„í•œ í”„ë¡œì„¸ìŠ¤ í’€ë¡œ, ë³‘ë ¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì¤€ë¹„ëœ í”„ë¡œì„¸ìŠ¤ ì§‘í•©ì…ë‹ˆë‹¤.
* `CPU ì½”ì–´ ì‚¬ìš©`: ì‹œìŠ¤í…œì— 8ê°œì˜ CPU ì½”ì–´ê°€ ìˆëŠ” ê²½ìš°, Pool(4)ì— ì˜í•´ ìƒì„±ëœ ê° í”„ë¡œì„¸ìŠ¤ëŠ” ì´ìš© ê°€ëŠ¥í•œ CPU ì½”ì–´ ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì ì€, í”„ë¡œì„¸ìŠ¤ í’€ì— ì˜í•´ ìƒì„±ëœ í”„ë¡œì„¸ìŠ¤ ìˆ˜ê°€ ì‹œìŠ¤í…œì˜ CPU ì½”ì–´ ìˆ˜ë³´ë‹¤ ì ê¸° ë•Œë¬¸ì—, ëª¨ë“  í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œì— ì‹¤í–‰ë  ìˆ˜ ìˆìœ¼ë©°, ê°ê° ë³„ë„ì˜ CPU ì½”ì–´ì— í• ë‹¹ë  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.

#### ì‘ì—… ì²˜ë¦¬ ë°©ì‹

* `ë³‘ë ¬ ì²˜ë¦¬`: ìƒì„±ëœ 4ê°œì˜ í”„ë¡œì„¸ìŠ¤ëŠ” ë™ì‹œì— ì‹¤í–‰ë˜ì–´ ê°ê° í• ë‹¹ëœ ì‘ì—…(ë°ì´í„° ì²­í¬)ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì‹œìŠ¤í…œì— ì—¬ìœ  ì½”ì–´ê°€ ì¶©ë¶„íˆ ìˆê¸° ë•Œë¬¸ì—, ì´ í”„ë¡œì„¸ìŠ¤ë“¤ì€ ì„œë¡œ ê²½ìŸ ì—†ì´ ê°ìì˜ ì½”ì–´ì—ì„œ ì‹¤í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* `ìì› í™œìš© ìµœì í™”`: 8ê°œì˜ ì½”ì–´ ì¤‘ 4ê°œë§Œ ì‚¬ìš©ë˜ë¯€ë¡œ, ë‚˜ë¨¸ì§€ ì½”ì–´ëŠ” ì‹œìŠ¤í…œì˜ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë‚˜ ì‘ì—…ì— ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë©€í‹°íƒœìŠ¤í‚¹ í™˜ê²½ì—ì„œ ì‹œìŠ¤í…œ ìì›ì„ íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

> **(ì°¸ê³ ) ê·¸ëŸ¼ ì–´ë–»ê²Œ í•´ì•¼ ê°€ìš© ìì›ì„ ë‹¤ ì“¸ ìˆ˜ ìˆì„ê¹Œ?**
> 
> íŒŒì´ì¬ì˜ `multiprocessing` ëª¨ë“ˆì€ í”„ë¡œì„¸ìŠ¤ë‹¹ CPU ì½”ì–´ ìˆ˜ë¥¼ ì§ì ‘ ì§€ì •í•˜ëŠ” ê¸°ëŠ¥ì„ ì§ì ‘ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. CPU ì½”ì–´ì˜ í• ë‹¹ê³¼ ìŠ¤ì¼€ì¤„ë§ì€ ìš´ì˜ ì²´ì œì˜ ì‘ì—…ì´ë©°, `multiprocessing` ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì´ëŸ¬í•œ ë‚®ì€ ìˆ˜ì¤€ì˜ ìì› ê´€ë¦¬ì— ì§ì ‘ ê°œì…í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì „ì²´ CPU ì½”ì–´ë¥¼ ìµœëŒ€í•œ í™œìš©í•˜ë ¤ëŠ” ëª©ì ì´ë¼ë©´, ì‘ì—…ì„ ë” ë§ì€ í”„ë¡œì„¸ìŠ¤ì— ë¶„ë°°í•˜ê±°ë‚˜ ì‹œìŠ¤í…œì˜ ë³‘ë ¬ ì²˜ë¦¬ ëŠ¥ë ¥ì„ ìµœëŒ€ë¡œ í™œìš©í•˜ëŠ” ë°©ë²•ì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> ã…¤
> **ì „ì²´ CPU ì½”ì–´ ì‚¬ìš©í•˜ê¸° :** ì‹œìŠ¤í…œì— ìˆëŠ” ëª¨ë“  CPU ì½”ì–´ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´, `multiprocessing.cpu\_count()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œìŠ¤í…œì— ìˆëŠ” ì½”ì–´ì˜ ìˆ˜ë¥¼ í™•ì¸í•˜ê³ , ì´ë¥¼ `Pool`ì˜ ì¸ìë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë°©ë²•ì€ ì‹œìŠ¤í…œì˜ ëª¨ë“  CPU ì½”ì–´ë¥¼ í™œìš©í•˜ì—¬ ë³‘ë ¬ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ë ¤ëŠ” ê²½ìš° ìœ ìš©í•©ë‹ˆë‹¤. ì•„ë˜ ì˜ˆì‹œë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš” ğŸ¤—

```
# ì „ì²´ CPU ì½”ì–´ ì‚¬ìš©í•˜ê¸°
from multiprocessing import Pool, cpu_count

def my_task(data_chunk):
    # ë³µì¡í•œ ê³„ì‚° ìˆ˜í–‰
    result = sum(data_chunk)
    return result

if __name__ == "__main__":
    data = range(1000000)  # ëŒ€ëŸ‰ì˜ ë°ì´í„°
    num_cores = cpu_count()  # ì‹œìŠ¤í…œì˜ CPU ì½”ì–´ ìˆ˜ í™•ì¸
    chunks = [data[i::num_cores] for i in range(num_cores)]  # ë°ì´í„°ë¥¼ CPU ì½”ì–´ ìˆ˜ë§Œí¼ ì²­í¬ë¡œ ë‚˜ëˆ”

    with Pool(num_cores) as p:  # ì‹œìŠ¤í…œì˜ ëª¨ë“  CPU ì½”ì–´ ì‚¬ìš©
        results = p.map(my_task, chunks)
```

---

### ë©€í‹°ìŠ¤ë ˆë”© ìì› í• ë‹¹ ì˜ˆì‹œ

ì´ ë©€í‹°ìŠ¤ë ˆë”© ì˜ˆì‹œì—ì„œëŠ” ì „ì²´ ì‘ì—… ë²”ìœ„ë¥¼ 4ê°œë¡œ ë‚˜ëˆ„ì–´ ê° ìŠ¤ë ˆë“œê°€ ì²˜ë¦¬í•˜ë„ë¡ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë°©ì‹ì€ ê° ìŠ¤ë ˆë“œê°€ ì²˜ë¦¬í•  ë°ì´í„°ì˜ ì–‘ì„ ëª…í™•í•˜ê²Œ ì§€ì •í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ì‘ì—…ì˜ ë¶„ë°°ê°€ ê³ ë¥´ê²Œ ì´ë£¨ì–´ì§€ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
import threading

def my_task(start, end):
    # ë²”ìœ„ ë‚´ì˜ ìˆ«ì í•©ê³„ ê³„ì‚°
    result = sum(range(start, end))
    print(f"Result: {result}")

threads = []
for i in range(4):
    # ì „ì²´ ë²”ìœ„ë¥¼ 4ê°œì˜ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ê° ìŠ¤ë ˆë“œì— í• ë‹¹
    t = threading.Thread(target=my_task, args=(250000*i, 250000*(i+1)))
    threads.append(t)
    t.start()

for t in threads:
    t.join()
```

ì œì‹œëœ ì˜ˆì‹œ ì½”ë“œì—ì„œëŠ” ê° ìŠ¤ë ˆë“œê°€ ì²˜ë¦¬í•˜ëŠ” ë°ì´í„°ì˜ ì–‘ì„ ê· ë“±í•˜ê²Œ ë¶„ë°°í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ëŠ” ê° ì‘ì—… ë‹¨ìœ„ê°€ ë™ì¼í•œ ìì›ì„ ì†Œë¹„í•œë‹¤ê³  ê°€ì •í–ˆì„ ë•Œ ìœ ìš©í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” ì‘ì—…ì˜ ë³µì¡ë„ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ìœ„ì—ì„œ ì–¸ê¸‰í•œ ë°©ë²•ë“¤ì„ í†µí•´ ì‘ì—… ë¶„ë°° ë°©ì‹ì„ ë³´ë‹¤ ì„¸ë°€í•˜ê²Œ ì¡°ì •í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.

ì‘ì—…ì˜ ë³µì¡ë„ë‚˜ ìì› ì†Œë¹„ëŸ‰ì„ ê³ ë ¤í•˜ì—¬ ì‘ì—…ì„ í• ë‹¹í•˜ëŠ” ê²ƒì€ ë©€í‹°ìŠ¤ë ˆë”© í”„ë¡œê·¸ë¨ì˜ ì„±ëŠ¥ì„ ìµœì í™”í•˜ëŠ” ë° ì¤‘ìš”í•œ ìš”ì†Œì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ì‘ì—…ì˜ íŠ¹ì„±ì„ ì •í™•íˆ íŒŒì•…í•˜ê³ , ì´ì— ê¸°ë°˜í•œ ì ì ˆí•œ ì‘ì—… ë¶„ë°° ì „ëµì„ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

> **(ì°¸ê³ ) ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ ë©€í‹°ìŠ¤ë ˆë”© í”„ë¡œê·¸ë¨ì˜ ì„±ëŠ¥ì„ ìµœì í™”ë¥¼ í• ê¹Œ?**  
> 
> queueë¥¼ ì‚¬ìš©í•´ì„œ taskì˜ ë³µì¡ë„ë¥¼ ì •ì˜í•˜ê³  ì´ë¥¼ argsë¡œ ë„£ì–´ì£¼ë©´ ê° ìŠ¤ë ˆë“œê°€ ì²˜ë¦¬í•  ë°ì´í„°ì˜ ì–‘ì„ ëª…í™•í•˜ê²Œ ì •ì˜í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì•„ë˜ ì˜ˆì‹œì½”ë“œ ì°¸ê³ )

```
import time
import queue

# ì‘ì—… í•¨ìˆ˜
def worker(work_queue):
    while not work_queue.empty():
        try:
            # íì—ì„œ ì‘ì—…ì„ ê°€ì ¸ì˜´
            task = work_queue.get_nowait()
        except queue.Empty:
            break

        # ì‘ì—…ì˜ ë‚´ìš©(ì—¬ê¸°ì„œëŠ” ë‹¨ìˆœíˆ ì¼ì • ì‹œê°„ ëŒ€ê¸°í•˜ëŠ” ê²ƒìœ¼ë¡œ ê°€ì •)
        print(f"{threading.current_thread().name} is processing task: {task}")
        time.sleep(task)
        print(f"{threading.current_thread().name} finished task: {task}")

        # ì‘ì—… ì™„ë£Œë¥¼ íì— ì•Œë¦¼
        work_queue.task_done()

# ì‘ì—… í ìƒì„± ë° ì‘ì—… ì¶”ê°€
work_queue = queue.Queue()
tasks = [2, 4, 6, 8, 1, 3, 5, 7]  # ê° ìˆ«ìëŠ” ì‘ì—…ì˜ "ë³µì¡ë„"ë¥¼ ë‚˜íƒ€ëƒ„(ì˜ˆ: ì²˜ë¦¬ ì‹œê°„)
for task in tasks:
    work_queue.put(task)

# ìŠ¤ë ˆë“œ ìƒì„± ë° ì‹œì‘
num_threads = 4
threads = []
for i in range(num_threads):
    t = threading.Thread(target=worker, args=(work_queue,))
    t.start()
    threads.append(t)

# ëª¨ë“  ìŠ¤ë ˆë“œì˜ ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°
for t in threads:
    t.join()

print("All tasks are completed.")
```
